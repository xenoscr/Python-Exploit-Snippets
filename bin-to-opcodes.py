#!/usr/bin/python
import sys
import binascii
import argparse

def main(inputFile, outputFile):
	with open(inputFile, 'rb') as f:
		content = f.read()

	rawHexString = binascii.hexlify(content)

	formatedHexString = ""

	for i in range(0, len(rawHexString), 2):
		formatedHexString += "\\x{byteValue}".format(byteValue = rawHexString[i:i+2].upper())

	with open(outputFile, 'w') as f:
		f.write(formatedHexString)

if __name__ == "__main__":
	parser = argparse.ArgumentParser(description = 'Extract the contents of a binary file and output an escaped string to a file.')
	parser.add_argument("-i", "--input", type=str, help="The import binary file.")
	parser.add_argument("-o", "--output", type=str, help="The output file name.")
	args = parser.parse_args()

	if args.input:
		if args.output:
			main(args.input, args.output)
		else:
			main(args.input, args.input + '.optcodes')
	else:
		parser.print_help(sys.stderr)

